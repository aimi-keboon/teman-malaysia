<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Home Care Package - Teman Malaysia</title>
    <meta
      name="description"
      content="Book comprehensive day care services with Teman Malaysia. Professional assistance with daily activities in the comfort of home."
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../assets/images/favicon.png" />
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png" />

    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css" />
    <link rel="stylesheet" href="../assets/css/responsive.css" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Include Flatpickr CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />

    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        color: #374151;
        background: #f9fafb;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
        transition: all 0.3s ease;
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 0;
      }

      .nav__logo {
        height: 40px;
        width: auto;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 500;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
      }

      .btn--primary {
        background: #059669;
        color: white;
      }

      .btn--primary:hover {
        background: #047857;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(5, 150, 105, 0.3);
      }

      .btn--outline {
        background: transparent;
        color: #059669;
        border: 2px solid #059669;
      }

      .btn--outline:hover {
        background: #059669;
        color: white;
        transform: translateY(-2px);
      }

      .btn--large {
        padding: 16px 32px;
        font-size: 16px;
      }

      .btn--success {
        background: #16a34a;
        color: white;
        font-weight: 600;
      }

      .btn--success:hover {
        background: #15803d;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
      }

      .btn--secondary {
        background: #10b981;
        color: white;
      }

      .btn--secondary:hover {
        background: #059669;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      }

      /* Main Section */
      .booking-section {
        padding: 120px 0 80px 0;
        min-height: 100vh;
      }

      .booking__header {
        text-align: center;
        margin-bottom: 60px;
      }

      .booking__title {
        font-size: 3rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 16px;
      }

      .booking__subtitle {
        font-size: 1.25rem;
        color: #6b7280;
        max-width: 600px;
        margin: 0 auto;
      }

      .service-info-card {
        background: white;
        border-radius: 16px;
        padding: 32px;
        margin: 0 auto 40px auto;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 2px solid #e5f3ff;
        max-width: 800px;
      }

      .service-header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
      }

      .service-icon {
        width: 60px;
        height: 60px;
        background: #059669;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .service-icon i {
        font-size: 24px;
        color: white;
      }

      .service-header h2 {
        font-size: 1.75rem;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
      }

      .service-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 24px;
      }

      .feature-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #4b5563;
      }

      .feature-item i {
        color: #10b981;
        font-size: 12px;
      }

      .services-overview {
        background: #f0fdf4;
        border-radius: 12px;
        padding: 24px;
        margin-top: 24px;
      }

      .services-overview h4 {
        color: #059669;
        font-size: 1.125rem;
        font-weight: 600;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .services-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
      }

      .service-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #065f46;
      }

      .service-item i {
        color: #059669;
        font-size: 12px;
        width: 12px;
      }

      /* Progress Steps */
      .progress-steps {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 40px 0 60px 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        gap: 80px;
      }

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .step__number {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 18px;
        background: #e5e7eb;
        color: #6b7280;
        border: 3px solid #e5e7eb;
        transition: all 0.3s ease;
        margin-bottom: 12px;
      }

      .step.active .step__number {
        background: #059669;
        color: white;
        border-color: #059669;
        box-shadow: 0 0 0 4px rgba(5, 150, 105, 0.1);
      }

      .step.completed .step__number {
        background: #10b981;
        color: white;
        border-color: #10b981;
      }

      .step__label {
        font-size: 14px;
        font-weight: 500;
        color: #6b7280;
        text-align: center;
        transition: color 0.3s ease;
        white-space: nowrap;
      }

      .step.active .step__label {
        color: #059669;
        font-weight: 600;
      }

      .step.completed .step__label {
        color: #10b981;
        font-weight: 600;
      }

      /* Form Container */
      .booking__container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      /* Form Styles */
      .booking-form {
        padding: 40px;
      }

      .form-step {
        display: none;
      }

      .form-step.active {
        display: block;
      }

      .step-title {
        font-size: 2rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 32px;
        text-align: center;
      }

      /* Package Selection */
      .package-options {
        display: grid;
        gap: 20px;
        margin-bottom: 40px;
      }

      .package-option {
        position: relative;
      }

      .package-option input[type="radio"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }

      .package-card {
        display: block;
        padding: 24px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
      }

      .package-card:hover {
        border-color: #059669;
        box-shadow: 0 4px 12px rgba(5, 150, 105, 0.1);
      }

      .package-option input[type="radio"]:checked + .package-card {
        border-color: #059669;
        background: #f0fdf4;
        box-shadow: 0 4px 12px rgba(5, 150, 105, 0.1);
      }

      .package-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .package-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
      }

      .package-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: #059669;
      }

      .package-description {
        color: #6b7280;
        margin-bottom: 16px;
      }

      .package-details {
        background: #f9fafb;
        border-radius: 8px;
        padding: 16px;
        margin-top: 16px;
      }

      .package-details h5 {
        color: #059669;
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 12px;
      }

      .package-includes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 8px;
      }

      .package-includes .feature-item {
        font-size: 13px;
      }

      .package-notes {
        margin-top: 16px;
        padding: 12px;
        background: #f0fdf4;
        border-radius: 6px;
        border-left: 4px solid #059669;
      }

      .package-notes small {
        display: block;
        color: #065f46;
        margin-bottom: 4px;
      }

      /* Form Sections */
      .form-section {
        margin-bottom: 40px;
        padding: 24px;
        background: #f9fafb;
        border-radius: 12px;
      }

      .form-section-title {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 24px;
      }

      .form-section-title i {
        color: #059669;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
        margin-top: 10px;
      }

      .form-label {
        font-weight: 500;
        color: #374151;
        margin-bottom: 8px;
        font-size: 14px;
      }

      .form-input,
      .form-select,
      .form-textarea {
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        transition: border-color 0.3s ease;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        border-color: #059669;
        box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.1);
      }

      .form-help {
        font-size: 12px;
        color: #6b7280;
        margin-top: 4px;
      }

      /* Radio and Checkbox Options */
      .radio-option,
      .checkbox-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 16px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 12px;
      }

      .radio-option:hover,
      .checkbox-item:hover {
        border-color: #059669;
      }

      .radio-option input[type="radio"],
      .checkbox-item input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }

      .radio-custom,
      .checkmark {
        width: 20px;
        height: 20px;
        border: 2px solid #d1d5db;
        position: relative;
        flex-shrink: 0;
        transition: all 0.3s ease;
      }

      .radio-custom {
        border-radius: 50%;
      }

      .checkmark {
        border-radius: 4px;
      }

      .radio-option:hover .radio-custom,
      .checkbox-item:hover .checkmark {
        border-color: #059669;
      }

      .radio-option input[type="radio"]:checked ~ .radio-custom {
        border-color: #059669;
      }

      .radio-option input[type="radio"]:checked ~ .radio-custom::after {
        content: "";
        width: 8px;
        height: 8px;
        background: #059669;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .checkbox-item input[type="checkbox"]:checked ~ .checkmark {
        background: #059669;
        border-color: #059669;
      }

      .checkbox-item input[type="checkbox"]:checked ~ .checkmark::after {
        content: "✓";
        color: white;
        font-size: 12px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .radio-content strong {
        display: block;
        margin-bottom: 4px;
        color: #1f2937;
      }

      .radio-content p {
        font-size: 14px;
        color: #6b7280;
        margin: 0;
      }

      /* Checkbox Group */
      .checkbox-group {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
      }

      /* Fixed checkbox styling */
      .terms-checkbox {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        cursor: pointer;
        margin-bottom: 32px;
      }

      .terms-checkbox input[type="checkbox"] {
        opacity: 0;
        position: absolute;
        pointer-events: none;
      }

      .terms-checkbox .checkmark {
        width: 20px;
        height: 20px;
        border: 2px solid #d1d5db;
        border-radius: 4px;
        position: relative;
        flex-shrink: 0;
        transition: all 0.3s ease;
        margin-top: 2px;
      }

      .terms-checkbox:hover .checkmark {
        border-color: #059669;
      }

      .terms-checkbox input[type="checkbox"]:checked ~ .checkmark {
        background: #059669;
        border-color: #059669;
      }

      .terms-checkbox input[type="checkbox"]:checked ~ .checkmark::after {
        content: "✓";
        color: white;
        font-size: 12px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .terms-text {
        font-size: 14px;
        color: #374151;
      }

      .terms-text a {
        color: #059669;
        text-decoration: none;
      }

      .terms-text a:hover {
        text-decoration: underline;
      }

      /* Summary Styles */
      .booking-summary {
        display: grid;
        gap: 24px;
        margin-bottom: 32px;
      }

      .summary-card {
        background: #f9fafb;
        border-radius: 12px;
        padding: 24px;
        border: 1px solid #e5e7eb;
      }

      .summary-card h3 {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #1f2937;
        margin-bottom: 20px;
        font-size: 1.25rem;
        font-weight: 600;
      }

      .summary-card h3 i {
        color: #059669;
      }

      .summary-item {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
        padding-bottom: 8px;
        border-bottom: 1px solid #e5e7eb;
      }

      .summary-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
      }

      .summary-label {
        font-weight: 500;
        color: #6b7280;
        flex: 0 0 40%;
      }

      .summary-value {
        color: #1f2937;
        text-align: right;
        flex: 1;
        word-break: break-word;
      }

      .summary-item.total {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 2px solid #059669;
        font-size: 1.125rem;
        font-weight: 600;
      }

      .summary-item.total .summary-label {
        color: #1f2937;
      }

      .summary-item.total .summary-value {
        color: #059669;
        font-size: 1.25rem;
      }

      .cost-note {
        font-size: 12px;
        color: #6b7280;
        margin-top: 8px;
        font-style: italic;
      }

      .summary-divider {
        height: 1px;
        background: #e5e7eb;
        margin: 16px 0;
      }

      /* Form Actions */
      .form-actions {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        margin-top: 40px;
      }

      /* Back Link */
      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: #6b7280;
        text-decoration: none;
        margin-bottom: 24px;
        font-size: 14px;
        transition: color 0.3s ease;
      }

      .back-link:hover {
        color: #059669;
      }

      /* Error styling */
      .error {
        border-color: #ef4444 !important;
        box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1) !important;
      }

      .error-message {
        color: #ef4444;
        font-size: 12px;
        margin-top: 4px;
      }

      /* Modal */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }

      .modal-content {
        background: white;
        border-radius: 16px;
        padding: 40px;
        max-width: 500px;
        text-align: center;
        margin: 20px;
      }

      .success-icon {
        font-size: 4rem;
        color: #10b981;
        margin-bottom: 20px;
      }

      .modal-content h2 {
        color: #1f2937;
        margin-bottom: 16px;
      }

      .booking-reference {
        background: #f3f4f6;
        padding: 16px;
        border-radius: 8px;
        margin: 20px 0;
      }

      .modal-actions {
        display: flex;
        gap: 12px;
        justify-content: center;
        margin-top: 24px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .booking__title {
          font-size: 2rem;
        }

        .booking-form {
          padding: 24px;
        }

        .form-grid {
          grid-template-columns: 1fr;
        }

        .form-actions {
          flex-direction: column;
        }

        .service-header {
          flex-direction: column;
          text-align: center;
          align-items: center;
        }

        .service-icon {
          margin-bottom: 16px;
        }

        .progress-steps {
          margin: 30px 0 40px 0;
          gap: 40px;
        }

        .step__number {
          width: 40px;
          height: 40px;
          font-size: 16px;
        }

        .step__label {
          font-size: 12px;
        }

        .package-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .services-grid {
          grid-template-columns: 1fr;
        }
      }

      .text-center {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- Header Component -->
    <div id="header-placeholder"></div>

    <!-- Booking Section -->
    <section class="booking-section">
      <div class="container">
        <a href="booking.html" class="back-link">
          <i class="fas fa-arrow-left"></i>
          Back to Services
        </a>

        <div class="booking__header text-center">
          <h1 class="booking__title">Home Care Package</h1>
          <p class="booking__subtitle">
            Comprehensive day care services providing assistance with daily
            activities in the comfort of home
          </p>
        </div>

        <!-- Service Information Card -->
        <div class="service-info-card">
          <div class="service-header">
            <div class="service-icon">
              <i class="fas fa-home"></i>
            </div>
            <h2>TEMAN at Home Package</h2>
          </div>
          <p>
            Experience comprehensive care in the comfort of your own home. Our
            trained Temanions provide professional assistance with daily
            activities, ensuring comfort, safety, and companionship throughout
            the day.
          </p>

          <div class="services-overview">
            <h4>
              <i class="fas fa-list-check"></i> Complete Care Services Include:
            </h4>
            <div class="services-grid">
              <div class="service-item">
                <i class="fas fa-utensils"></i>
                Meal preparation & feeding assistance
              </div>
              <div class="service-item">
                <i class="fas fa-dumbbell"></i>
                Light physiotherapy & exercises
              </div>
              <div class="service-item">
                <i class="fas fa-bath"></i>
                Personal care & hygiene assistance
              </div>
              <div class="service-item">
                <i class="fas fa-heart"></i>
                Companionship & emotional support
              </div>
              <div class="service-item">
                <i class="fas fa-brain"></i>
                Mind wellness activities
              </div>
              <div class="service-item">
                <i class="fas fa-walking"></i>
                Outdoor exercise & activities
              </div>
              <div class="service-item">
                <i class="fas fa-baby"></i>
                Diaper changing assistance
              </div>
            </div>
          </div>
        </div>

        <div class="booking__container">
          <!-- Progress Steps -->
          <div class="progress-steps" id="progressSteps">
            <div class="step active" data-step="1">
              <div class="step__number">1</div>
              <div class="step__label">Package</div>
            </div>
            <div class="step" data-step="2">
              <div class="step__number">2</div>
              <div class="step__label">Details</div>
            </div>
            <div class="step" data-step="3">
              <div class="step__number">3</div>
              <div class="step__label">Confirm</div>
            </div>
          </div>

          <!-- Booking Form -->
          <form
            id="home-package-booking-form"
            class="booking-form"
            data-form-type="home-package"
          >
            <!-- Step 1: Package Selection -->
            <div class="form-step active" data-step="1">
              <h2 class="step-title">Choose Your Home Care Package</h2>

              <div class="package-options">
                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="package1"
                    id="package1"
                    required
                  />
                  <label for="package1" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Package 1</div>
                      <div class="package-price">RM2,800</div>
                    </div>
                    <div class="package-description">
                      Essential daily care package - 4 hours per day for 20
                      sessions, perfect for basic daily assistance needs.
                    </div>

                    <div class="package-details">
                      <h5>Package Includes:</h5>
                      <div class="package-includes">
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          4 hours/day care
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          20 sessions total
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          All basic care services
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          Transport allowance included
                        </div>
                      </div>
                    </div>

                    <div class="package-notes">
                      <small>• Ideal for morning or afternoon care</small>
                      <small
                        >• Suitable for independent seniors needingdaily
                        support</small
                      >
                      <small>• Best value for basic care needs</small>
                    </div>
                  </label>
                </div>

                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="package2"
                    id="package2"
                  />
                  <label for="package2" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Package 2</div>
                      <div class="package-price">RM3,780</div>
                    </div>
                    <div class="package-description">
                      Comprehensive care package - 6 hours per day for 20
                      sessions, ideal for moderate care requirements.
                    </div>

                    <div class="package-details">
                      <h5>Package Includes:</h5>
                      <div class="package-includes">
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          6 hours/day care
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          20 sessions total
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          All comprehensive services
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          Extended companionship
                        </div>
                      </div>
                    </div>

                    <div class="package-notes">
                      <small>• Perfect for full morning/afternoon care</small>
                      <small
                        >• Includes meal preparation and companionship</small
                      >
                      <small>• Most popular choice</small>
                    </div>
                  </label>
                </div>

                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="package3"
                    id="package3"
                  />
                  <label for="package3" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Package 3</div>
                      <div class="package-price">RM4,720</div>
                    </div>
                    <div class="package-description">
                      Premium full-day care package - 8 hours per day for 20
                      sessions, for comprehensive daily support needs.
                    </div>

                    <div class="package-details">
                      <h5>Package Includes:</h5>
                      <div class="package-includes">
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          8 hours/day care
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          20 sessions total
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          Premium full-day services
                        </div>
                        <div class="feature-item">
                          <i class="fas fa-check"></i>
                          Maximum support & companionship
                        </div>
                      </div>
                    </div>

                    <div class="package-notes">
                      <small>• Complete daily care coverage</small>
                      <small>• Ideal for high-dependency needs</small>
                      <small>• Premium comprehensive support</small>
                    </div>
                  </label>
                </div>
              </div>

              <div
                style="
                  background: #f0fdf4;
                  padding: 16px;
                  border-radius: 8px;
                  margin-bottom: 32px;
                  border-left: 4px solid #059669;
                "
              >
                <h4 style="color: #047857; margin-bottom: 8px">
                  Package Terms & Conditions:
                </h4>
                <small
                  style="display: block; color: #047857; margin-bottom: 4px"
                  >• Valid within 60 days of purchase</small
                >
                <small
                  style="display: block; color: #047857; margin-bottom: 4px"
                  >• Available for weekdays only (excluding Sundays & Public
                  Holidays)</small
                >
                <small
                  style="display: block; color: #047857; margin-bottom: 4px"
                  >• Inclusive transport allowance for Temanion</small
                >
                <small style="display: block; color: #047857"
                  >• Unused sessions cannot be refunded but can be
                  rescheduled</small
                >
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn--primary btn--large"
                  onclick="nextStep()"
                >
                  Continue to Details
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>
            
            <!-- Step 2: Personal Details -->
            <div class="form-step" data-step="2">
              <h2 class="step-title">Care Requirements & Details</h2>

              <!-- Contact Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-user"></i>
                  Contact Information
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="full-name" class="form-label"
                      >Full Name *</label
                    >
                    <input
                      type="text"
                      id="full-name"
                      name="full_name"
                      class="form-input"
                      placeholder="Enter your full name"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="relationship" class="form-label"
                      >Relationship to Care Recipient</label
                    >
                    <select
                      id="relationship"
                      name="relationship"
                      class="form-select"
                    >
                      <option value="">Select relationship</option>
                      <option value="self">Self</option>
                      <option value="spouse">Spouse</option>
                      <option value="child">Son/Daughter</option>
                      <option value="parent">Parent</option>
                      <option value="sibling">Brother/Sister</option>
                      <option value="relative">Other Relative</option>
                      <option value="caregiver">Professional Caregiver</option>
                      <option value="friend">Friend</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="phone" class="form-label">Phone Number *</label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      class="form-input"
                      placeholder="+60 11-234 5678"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="email" class="form-label"
                      >Email Address *</label
                    >
                    <input
                      type="email"
                      id="email"
                      name="email"
                      class="form-input"
                      placeholder="your.email@example.com"
                      required
                    />
                    <small class="form-help"
                      >Use company email if claiming staff benefit</small
                    >
                  </div>
                  <div class="form-group">
                    <label for="employer" class="form-label"
                      >Employer Name</label
                    >
                    <input
                      type="text"
                      id="employer"
                      name="employer"
                      class="form-input"
                    />
                    <small class="form-help"
                      >For those claiming for Staff Benefit only</small
                    >
                  </div>

                  <div class="form-group">
                    <label for="staff_id" class="form-label">Staff ID</label>
                    <input
                      type="text"
                      id="staff_id"
                      name="staff_id"
                      class="form-input"
                    />
                    <small class="form-help"
                      >For those claiming for Staff Benefit only</small
                    >
                  </div>
                </div>

                <div class="form-group">
                  <label for="emergency-contact" class="form-label"
                    >Emergency Contact Person *</label
                  >
                  <input
                    type="text"
                    id="emergency-contact"
                    name="emergency_contact"
                    class="form-input"
                    placeholder="Name and phone number of emergency contact"
                    required
                  />
                </div>
              </div>

              <!-- Care Recipient Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-heart-pulse"></i>
                  Care Recipient Information
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="patient-name" class="form-label"
                      >Care Recipient Name</label
                    >
                    <input
                      type="text"
                      id="patient-name"
                      name="patient_name"
                      class="form-input"
                      placeholder="If different from contact person"
                    />
                  </div>

                  <div class="form-group">
                    <label for="patient-age" class="form-label">Age *</label>
                    <input
                      type="number"
                      id="patient-age"
                      name="patient_age"
                      class="form-input"
                      min="1"
                      max="120"
                      placeholder="Age in years"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="patient-gender" class="form-label"
                      >Gender</label
                    >
                    <select
                      id="patient-gender"
                      name="patient_gender"
                      class="form-select"
                    >
                      <option value="">Select gender</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="patient-language" class="form-label"
                      >Preferred Language</label
                    >
                    <select
                      id="patient-language"
                      name="patient_language"
                      class="form-select"
                    >
                      <option value="english">English</option>
                      <option value="bahasa">Bahasa Malaysia</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label for="patient-weight" class="form-label"
                      >Care Recipient Weight</label
                    >
                    <input
                      type="number"
                      id="patient-weight"
                      name="patient_weight"
                      class="form-input"
                      placeholder="Weight in kg"
                    />
                  </div>
                  <div class="form-group">
                    <label for="patient-height" class="form-label"
                      >Care Recipient Height</label
                    >
                    <input
                      type="number"
                      id="patient-height"
                      name="patient_height"
                      class="form-input"
                      placeholder="Height in cm"
                    />
                  </div>
                </div>
              </div>

              <!-- Service Location -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-home"></i>
                  Home Address
                </h3>
                <div class="form-group">
                  <label for="home-address" class="form-label"
                    >Complete Home Address *</label
                  >
                  <textarea
                    id="home-address"
                    name="home_address"
                    class="form-textarea"
                    rows="3"
                    placeholder="Please provide complete address including unit number, building name, street, postcode, city, and state"
                    required
                  ></textarea>
                </div>

                <div class="form-grid">
                  <div class="form-group">
                    <label for="postcode" class="form-label">Postcode *</label>
                    <input
                      type="text"
                      id="postcode"
                      name="postcode"
                      class="form-input"
                      placeholder="e.g. 50200"
                      pattern="[0-9]{5}"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="city" class="form-label">City *</label>
                    <input
                      type="text"
                      id="city"
                      name="city"
                      class="form-input"
                      placeholder="e.g. Kuala Lumpur"
                      required
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="home-access" class="form-label"
                    >Home Access Information</label
                  >
                  <textarea
                    id="home-access"
                    name="home_access"
                    class="form-textarea"
                    rows="2"
                    placeholder="Special access instructions, elevator, stairs, gate codes, etc."
                  ></textarea>
                </div>
              </div>

              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-car"></i>
                  Transportation for Activities
                </h3>
                <div style="display: grid; gap: 12px">
                  <label class="radio-option">
                    <input
                      type="radio"
                      name="transportation_mode"
                      value="client-provided"
                      required
                    />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>I will provide transportation</strong>
                    </div>
                  </label>

                  <label class="radio-option">
                    <input
                      type="radio"
                      name="transportation_mode"
                      value="teman-provided"
                      required
                    />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>Temanion will arrange transportation</strong>
                    </div>
                  </label>

                  <label class="radio-option">
                    <input
                      type="radio"
                      name="transportation_mode"
                      value="e-hailing"
                      required
                    />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>E-Hailing Service (Grab/Taxi)</strong>
                    </div>
                  </label>
                </div>

                <div class="form-group" style="margin-top: 16px">
                  <label for="transportation-notes" class="form-label"
                    >Transportation Notes</label
                  >
                  <textarea
                    id="transportation-notes"
                    name="transportation_notes"
                    class="form-textarea"
                    rows="2"
                    placeholder="Any specific transportation preferences, accessibility needs, or special instructions..."
                  ></textarea>
                </div>
              </div>

              <!-- Care Schedule -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-calendar-alt"></i>
                  Care Schedule Preferences
                </h3>

                <!-- Multi-date calendar -->
                <div class="form-group">
                  <label for="multi-dates" class="form-label">Select Multiple Care Dates *</label>
                  <input
                    type="text"
                    id="multi-dates"
                    name="multi_dates"
                    class="form-input"
                    placeholder="Select up to 20 dates"
                    readonly
                    required
                  />
                  <small class="form-help">Select specific dates; today and tomorrow are disabled</small>
                  <div id="date-limit-message" style="display:none; color: #666; margin-top: 5px; font-size: 0.875rem;">
                    If you're unsure of the remaining dates, you may plan or book them later with our representative.
                  </div>
                  <div id="date-count" style="color: #666; margin-top: 5px; font-size: 0.875rem;">
                    Selected dates: <span id="selected-count">0</span>/20
                  </div>
                </div>

                <!-- Time Selection -->
                <div class="form-grid">
                  <div class="form-group">
                    <label for="preferred-start-time" class="form-label">Start Time *</label>
                    <select id="preferred-start-time" name="preferred_start_time" class="form-select" required>
                      <option value="">Select start time</option>
                      <option value="07:00">07:00 AM</option>
                      <option value="08:00">08:00 AM</option>
                      <option value="09:00">09:00 AM</option>
                      <option value="10:00">10:00 AM</option>
                      <option value="11:00">11:00 AM</option>
                      <option value="12:00">12:00 PM</option>
                      <option value="13:00">01:00 PM</option>
                      <option value="14:00">02:00 PM</option>
                      <option value="15:00">03:00 PM</option>
                      <option value="16:00">04:00 PM</option>
                      <option value="17:00">05:00 PM</option>
                      <option value="18:00">06:00 PM</option>
                      <option value="19:00">07:00 PM</option>
                      <option value="20:00">08:00 PM</option>
                      <option value="21:00">09:00 PM</option>
                    </select>
                    <div id="start-time-error" style="display:none; color: #d32f2f; font-size: 0.875rem; margin-top: 5px;"></div>
                  </div>

                  <div class="form-group">
                    <label for="preferred-end-time" class="form-label">End Time *</label>
                    <select id="preferred-end-time" name="preferred_end_time" class="form-select" required>
                      <option value="">Select end time</option>
                      <option value="08:00">08:00 AM</option>
                      <option value="09:00">09:00 AM</option>
                      <option value="10:00">10:00 AM</option>
                      <option value="11:00">11:00 AM</option>
                      <option value="12:00">12:00 PM</option>
                      <option value="13:00">01:00 PM</option>
                      <option value="14:00">02:00 PM</option>
                      <option value="15:00">03:00 PM</option>
                      <option value="16:00">04:00 PM</option>
                      <option value="17:00">05:00 PM</option>
                    </select>
                    <div id="end-time-error" style="display:none; color: #d32f2f; font-size: 0.875rem; margin-top: 5px;"></div>
                  </div>
                </div>

                <!-- Date Range -->
                <div class="form-grid">
                  <div class="form-group">
                    <label for="start-date" class="form-label">Service Start Date *</label>
                    <input
                      type="date"
                      id="start-date"
                      name="start_date"
                      class="form-input"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="end-date" class="form-label">Service End Date *</label>
                    <input
                      type="date"
                      id="end-date"
                      name="end_date"
                      class="form-input"
                      required
                    />
                    <div id="date-range-error" style="display:none; color: #d32f2f; font-size: 0.875rem; margin-top: 5px;"></div>
                  </div>
                </div>
              </div>

              <!-- Care Services Needed -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-list-check"></i>
                  Required Care Services
                </h3>

                <div class="form-group">
                  <label class="form-label"
                    >Select all services needed: *</label
                  >
                  <div class="checkbox-group">
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="meal-preparation"
                      />
                      <span class="checkmark"></span>
                      Meal preparation & feeding assistance
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="physiotherapy"
                      />
                      <span class="checkmark"></span>
                      Light physiotherapy & exercises
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="personal-care"
                      />
                      <span class="checkmark"></span>
                      Personal care & hygiene assistance
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="companionship"
                      />
                      <span class="checkmark"></span>
                      Companionship & emotional support
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="mind-wellness"
                      />
                      <span class="checkmark"></span>
                      Mind wellness activities
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="outdoor-activities"
                      />
                      <span class="checkmark"></span>
                      Outdoor exercise & activities
                    </label>
                    <label class="checkbox-item">
                      <input
                        type="checkbox"
                        name="care_services[]"
                        value="bathing-assistance"
                      />
                      <span class="checkmark"></span>
                      Bathing & diaper changing
                    </label>
                  </div>
                </div>
              </div>

              <!-- Medical Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-notes-medical"></i>
                  Medical & Health Information
                </h3>

                <div class="form-group">
                  <label for="medical-conditions" class="form-label"
                    >Medical Conditions & Diagnoses</label
                  >
                  <textarea
                    id="medical-conditions"
                    name="medical_conditions"
                    class="form-textarea"
                    rows="3"
                    placeholder="Please list any medical conditions, chronic illnesses, disabilities, or health concerns..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="medications" class="form-label"
                    >Current Medications</label
                  >
                  <textarea
                    id="medications"
                    name="medications"
                    class="form-textarea"
                    rows="3"
                    placeholder="List all current medications, dosages, and administration times..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="allergies" class="form-label"
                    >Allergies & Dietary Restrictions</label
                  >
                  <textarea
                    id="allergies"
                    name="allergies"
                    class="form-textarea"
                    rows="2"
                    placeholder="Food allergies, medication allergies, dietary restrictions, etc..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="mobility-level" class="form-label"
                    >Mobility Level</label
                  >
                  <select
                    id="mobility-level"
                    name="mobility_level"
                    class="form-select"
                  >
                    <option value="">Select mobility level</option>
                    <option value="fully-mobile">
                      Fully mobile and independent
                    </option>
                    <option value="assisted-walking">
                      Mobile with assistance/walking aid
                    </option>
                    <option value="wheelchair-bound">Wheelchair bound</option>
                    <option value="bedridden">
                      Bedridden or very limited mobility
                    </option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="cognitive-status" class="form-label"
                    >Cognitive Status</label
                  >
                  <select
                    id="cognitive-status"
                    name="cognitive_status"
                    class="form-select"
                  >
                    <option value="">Select cognitive status</option>
                    <option value="alert-oriented">
                      Alert and fully oriented
                    </option>
                    <option value="mild-confusion">
                      Mild confusion or memory issues
                    </option>
                    <option value="moderate-dementia">
                      Moderate dementia/cognitive impairment
                    </option>
                    <option value="severe-dementia">
                      Severe dementia/cognitive impairment
                    </option>
                  </select>
                </div>

                <div class="form-group">
                  <label for="special-requirements" class="form-label"
                    >Special Care Requirements</label
                  >
                  <textarea
                    id="special-requirements"
                    name="special_requirements"
                    class="form-textarea"
                    rows="4"
                    placeholder="Any specific care procedures, behavioral considerations, equipment needed, or other important information..."
                  ></textarea>
                </div>
              </div>

              <!-- Companion Preferences -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-user-friends"></i>
                  Companion Preferences
                </h3>

                <div class="form-grid">
                  <div class="form-group">
                    <label for="companion-gender" class="form-label"
                      >Preferred Gender</label
                    >
                    <select
                      id="companion-gender"
                      name="companion_gender"
                      class="form-select"
                    >
                      <option value="no-preference">No preference</option>
                      <option value="female">Female</option>
                      <option value="male">Male</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="companion-language" class="form-label"
                      >Language Preference</label
                    >
                    <select
                      id="companion-language"
                      name="companion_language"
                      class="form-select"
                    >
                      <option value="english">English</option>
                      <option value="bahasa">Bahasa Malaysia</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  
                </div>

               
              </div>

              <!-- Additional Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-comment-dots"></i>
                  Additional Information
                </h3>

                <div class="form-group">
                  <label for="daily-routine" class="form-label"
                    >Current Daily Routine</label
                  >
                  <textarea
                    id="daily-routine"
                    name="daily_routine"
                    class="form-textarea"
                    rows="4"
                    placeholder="Please describe the typical daily routine, meal times, activity preferences, sleep schedule, etc..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="family-involvement" class="form-label"
                    >Family Member Involvement</label
                  >
                  <textarea
                    id="family-involvement"
                    name="family_involvement"
                    class="form-textarea"
                    rows="2"
                    placeholder="Will family members be present during care? Who should the Temanion coordinate with?"
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="additional-notes" class="form-label"
                    >Additional Notes & Requests</label
                  >
                  <textarea
                    id="additional-notes"
                    name="additional_notes"
                    class="form-textarea"
                    rows="4"
                    placeholder="Any other information, concerns, or special requests that would help us provide the best care..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="how-heard" class="form-label"
                    >How did you hear about us?</label
                  >
                  <select id="how-heard" name="how_heard" class="form-select">
                    <option value="google">Google Search</option>
                    <option value="facebook">Facebook</option>
                    <option value="instagram">Instagram</option>
                    <option value="friend">Friend/Family Referral</option>
                    <option value="doctor">Doctor/Medical Professional</option>
                    <option value="hospital">Hospital/Clinic</option>
                    <option value="newspaper">Newspaper/Magazine</option>
                    <option value="radio">Radio</option>
                    <option value="other">Other</option>
                  </select>
                </div>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn--outline btn--large"
                  onclick="prevStep()"
                >
                  <i class="fas fa-arrow-left"></i>
                  Previous
                </button>
                <button
                  type="button"
                  class="btn btn--primary btn--large"
                  onclick="nextStep()"
                >
                  Review Booking
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="form-step" data-step="3">
              <h2 class="step-title">Booking Summary & Payment</h2>

              <div class="booking-summary">
                <!-- Service Details -->
                <div class="summary-card">
                  <h3><i class="fas fa-clipboard-list"></i> Service Details</h3>
                  <div class="summary-item">
                    <span class="summary-label">Service:</span>
                    <span class="summary-value">Home Care Package</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Package:</span>
                    <span class="summary-value" id="summary-package">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Care Services:</span>
                    <span class="summary-value" id="summary-services">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Selected Dates:</span>
                    <span class="summary-value" id="summary-dates">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Schedule:</span>
                    <span class="summary-value" id="summary-schedule">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Start Date:</span>
                    <span class="summary-value" id="summary-start-date">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Transportation:</span>
                    <span class="summary-value" id="summary-transportation">-</span>
                  </div>
                  <div class="summary-divider"></div>
                  <div class="summary-item total">
                    <span class="summary-label">Package Cost:</span>
                    <span class="summary-value" id="summary-total">RM 0</span>
                  </div>
                  <p class="cost-note">
                    *Transport allowance included. Valid for 60 days from start
                    date.
                  </p>
                </div>

                <!-- Contact Information -->
                <div class="summary-card">
                  <h3><i class="fas fa-user"></i> Contact Information</h3>
                  <div class="summary-item">
                    <span class="summary-label">Name:</span>
                    <span class="summary-value" id="summary-name">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Phone:</span>
                    <span class="summary-value" id="summary-phone">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Email:</span>
                    <span class="summary-value" id="summary-email">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Home Address:</span>
                    <span class="summary-value" id="summary-address">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Emergency Contact:</span>
                    <span class="summary-value" id="summary-emergency">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Relationship:</span>
                    <span class="summary-value" id="summary-relationship">-</span>
                  </div>
                </div>

                <!-- Care Recipient Details -->
                <div class="summary-card">
                  <h3><i class="fas fa-heart-pulse"></i> Care Recipient Details</h3>
                  <div class="summary-item">
                    <span class="summary-label">Name:</span>
                    <span class="summary-value" id="summary-care-recipient">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Age & Gender:</span>
                    <span class="summary-value" id="summary-recipient-details">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Language:</span>
                    <span class="summary-value" id="summary-recipient-language">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Medical Conditions:</span>
                    <span class="summary-value" id="summary-medical">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Mobility Level:</span>
                    <span class="summary-value" id="summary-mobility">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Allergies:</span>
                    <span class="summary-value" id="summary-allergies">-</span>
                  </div>
                </div>

                <!-- Companion Preferences -->
                <div class="summary-card">
                  <h3><i class="fas fa-user-friends"></i> Companion Preferences</h3>
                  <div class="summary-item">
                    <span class="summary-label">Preferred Gender:</span>
                    <span class="summary-value" id="summary-companion-gender">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Language Preference:</span>
                    <span class="summary-value" id="summary-companion-language">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Age Preference:</span>
                    <span class="summary-value" id="summary-companion-age">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Personality Traits:</span>
                    <span class="summary-value" id="summary-companion-traits">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Additional Notes:</span>
                    <span class="summary-value" id="summary-notes">-</span>
                  </div>
                </div>
              </div>

              <!-- What Happens Next -->
              <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
                <h3 style="display: flex; align-items: center; gap: 8px; color: #047857; margin-bottom: 16px;">
                  <i class="fas fa-info-circle"></i> What Happens Next?
                </h3>
                <ul style="list-style: none; padding: 0">
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #047857;">
                    <i class="fas fa-credit-card" style="width: 20px; text-align: center"></i>
                    Pay the deposit to secure your booking
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #047857;">
                    <i class="fas fa-phone" style="width: 20px; text-align: center"></i>
                    Our care coordinator will contact you within 24 hours to confirm details and provide quotation
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #047857;">
                    <i class="fas fa-user-check" style="width: 20px; text-align: center"></i>
                    We will match you with a Temanion based on your needs
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #047857;">
                    <i class="fas fa-home" style="width: 20px; text-align: center"></i>
                    A care assessment visit will be scheduled before service begins
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; color: #047857;">
                    <i class="fas fa-calendar-check" style="width: 20px; text-align: center"></i>
                    Your personalized home care schedule will commence as planned
                  </li>
                </ul>
              </div>

              <!-- Important Package Information -->
              <div style="background: #fffbeb; border: 1px solid #fed7aa; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
                <h3 style="display: flex; align-items: center; gap: 8px; color: #ea580c; margin-bottom: 16px;">
                  <i class="fas fa-exclamation-triangle"></i> Important Package Information
                </h3>
                <ul style="list-style: none; padding: 0">
                  <li style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 8px; color: #ea580c;">
                    <i class="fas fa-clock" style="width: 20px; text-align: center; margin-top: 2px"></i>
                    All 20 sessions must be used within 60 days of the start date
                  </li>
                  <li style="display: flex; align-items: flex-start; gap: 12px; margin-bottom: 8px; color: #ea580c;">
                    <i class="fas fa-calendar-times" style="width: 20px; text-align: center; margin-top: 2px"></i>
                    Services are available on weekdays only (Mon-Sat, excluding holidays)
                  </li>
                  <li style="display: flex; align-items: flex-start; gap: 12px; color: #ea580c;">
                    <i class="fas fa-redo" style="width: 20px; text-align: center; margin-top: 2px"></i>
                    Sessions can be rescheduled but unused sessions cannot be refunded
                  </li>
                </ul>
              </div>

              <!-- Fixed Terms & Conditions Checkbox -->
              <label class="terms-checkbox">
                <input type="checkbox" name="terms_agreed" required />
                <span class="checkmark"></span>
                <span class="terms-text">
                  I agree to the <a href="#" target="_blank">Terms & Conditions</a>, 
                  <a href="#" target="_blank">Privacy Policy</a>, and package terms outlined above. I understand that a deposit is required to secure the booking.
                </span>
              </label>

              <div class="form-actions">
                <button type="button" class="btn btn--outline btn--large" onclick="prevStep()">
                  <i class="fas fa-arrow-left"></i>
                  Previous
                </button>
                <button type="button" class="btn btn--success btn--large" id="pay-deposit-btn" onclick="proceedToPayment()">
                  <i class="fas fa-credit-card"></i>
                  Pay Deposit & Confirm Booking
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Success Modal -->
    <div id="booking-success-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h2>Booking Request Submitted!</h2>
        <p>
          Thank you for choosing Teman Malaysia for your home care needs. We've
          received your package booking request and our care coordinator will
          contact you within 24 hours to finalize the details.
        </p>
        <div class="booking-reference">
          <strong>Reference Number: <span id="booking-ref-number"></span></strong>
        </div>
        <div class="modal-actions">
          <button class="btn btn--primary" onclick="window.location.href='booking.html'">
            Book Another Service
          </button>
          <button class="btn btn--outline" onclick="closeModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Footer Component -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
      // Current step tracking
      let currentStep = 1;
      const totalSteps = 3;

      // Update progress steps visual state
      function updateProgressSteps() {
        const steps = document.querySelectorAll(".step");

        steps.forEach((step, index) => {
          const stepNumber = index + 1;
          step.classList.remove("active", "completed");

          if (stepNumber < currentStep) {
            step.classList.add("completed");
          } else if (stepNumber === currentStep) {
            step.classList.add("active");
          }
        });
      }

      // Navigate to next step
      function nextStep() {
        if (currentStep < totalSteps) {
          if (validateCurrentStep()) {
            document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove("active");
            currentStep++;
            document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add("active");
            updateProgressSteps();

            if (currentStep === 3) {
              updateBookingSummary();
            }

            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        }
      }

      // Navigate to previous step
      function prevStep() {
        if (currentStep > 1) {
          document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove("active");
          currentStep--;
          document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add("active");
          updateProgressSteps();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }

      // Enhanced validation function
      function validateCurrentStep() {
        clearValidationErrors();

        if (currentStep === 1) {
          // Validate package selection
          const packageSelected = document.querySelector('input[name="package"]:checked');
          if (!packageSelected) {
            showValidationError("Please select a home care package before continuing.");
            return false;
          }

        } else if (currentStep === 2) {
          // Required fields validation
          const requiredFields = [
            { name: "full_name", label: "Full Name" },
            { name: "phone", label: "Phone Number" },
            { name: "email", label: "Email Address" },
            { name: "emergency_contact", label: "Emergency Contact" },
            { name: "patient_age", label: "Care Recipient Age" },
            { name: "home_address", label: "Home Address" },
            { name: "postcode", label: "Postcode" },
            { name: "city", label: "City" },
            { name: "multi_dates", label: "Care Dates" },
            { name: "preferred_start_time", label: "Start Time" },
            { name: "preferred_end_time", label: "End Time" },
            { name: "start_date", label: "Service Start Date" },
            { name: "end_date", label: "Service End Date" }
          ];

          for (let field of requiredFields) {
            const element = document.querySelector(`[name="${field.name}"], #${field.name.replace('_', '-')}`);
            if (!element || !element.value.trim()) {
              showValidationError(`Please fill in the ${field.label} field.`, field.name);
              element?.focus();
              return false;
            }
          }

          // Validate transportation mode
          const transportationSelected = document.querySelector('input[name="transportation_mode"]:checked');
          if (!transportationSelected) {
            showValidationError("Please select a transportation mode.");
            document.querySelector('input[name="transportation_mode"]')?.focus();
            return false;
          }

          // Check if at least one care service is selected
          const servicesSelected = document.querySelectorAll('input[name="care_services[]"]:checked');
          if (servicesSelected.length === 0) {
            showValidationError("Please select at least one care service needed.");
            return false;
          }

          // Validate email format
          const email = document.querySelector('[name="email"]')?.value;
          if (email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
              showValidationError("Please enter a valid email address.", "email");
              return false;
            }
          }

          // Validate time selection
          if (!validateTimes()) {
            return false;
          }

          // Validate date range
          if (!validateDateRange()) {
            return false;
          }

        } else if (currentStep === 3) {
          // Validate terms agreement
          const termsAgreed = document.querySelector('input[name="terms_agreed"]:checked');
          if (!termsAgreed) {
            showValidationError("Please agree to the Terms & Conditions and Privacy Policy to continue.");
            return false;
          }
        }

        return true;
      }

      // Show validation error
      function showValidationError(message, fieldName = null) {
        alert(message);
        
        if (fieldName) {
          const field = document.querySelector(`[name="${fieldName}"], #${fieldName.replace('_', '-')}`);
          if (field) {
            field.classList.add('error');
            field.focus();
          }
        }
      }

      // Clear validation errors
      function clearValidationErrors() {
        const errorFields = document.querySelectorAll('.error');
        errorFields.forEach(field => field.classList.remove('error'));
      }

      // Time validation
      function validateTimes() {
        const startTime = document.getElementById("preferred-start-time")?.value;
        const endTime = document.getElementById("preferred-end-time")?.value;
        const startError = document.getElementById("start-time-error");
        const endError = document.getElementById("end-time-error");
        
        // Clear previous errors
        if (startError) startError.style.display = "none";
        if (endError) endError.style.display = "none";
        
        if (startTime && endTime) {
          // Convert to comparable format (24-hour)
          const startHour = parseInt(startTime.split(':')[0]);
          const endHour = parseInt(endTime.split(':')[0]);
          
          if (endHour <= startHour) {
            if (endError) {
              endError.textContent = "End time must be after start time";
              endError.style.display = "block";
            }
            return false;
          }
        }
        return true;
      }

      // Date range validation
      function validateDateRange() {
        const startDate = document.getElementById("start-date")?.value;
        const endDate = document.getElementById("end-date")?.value;
        const dateError = document.getElementById("date-range-error");
        
        if (dateError) dateError.style.display = "none";
        
        if (startDate && endDate) {
          const start = new Date(startDate);
          const end = new Date(endDate);
          
          if (end <= start) {
            if (dateError) {
              dateError.textContent = "End date must be after start date";
              dateError.style.display = "block";
            }
            return false;
          }
        }
        return true;
      }

      // Enhanced booking summary update
      function updateBookingSummary() {
        // Package details
        const selectedPackage = document.querySelector('input[name="package"]:checked');
        if (selectedPackage) {
          let packageInfo = "";
          let packageCost = 0;

          if (selectedPackage.value === "package1") {
            packageInfo = "Package 1 - 4 hours/day, 20 sessions";
            packageCost = 2800;
          } else if (selectedPackage.value === "package2") {
            packageInfo = "Package 2 - 6 hours/day, 20 sessions";
            packageCost = 3780;
          } else if (selectedPackage.value === "package3") {
            packageInfo = "Package 3 - 8 hours/day, 20 sessions";
            packageCost = 4720;
          }

          document.getElementById("summary-package").textContent = packageInfo;
          document.getElementById("summary-total").textContent = `RM ${packageCost}`;
        }

        // Care services
        const selectedServices = document.querySelectorAll('input[name="care_services[]"]:checked');
        let servicesText = "";
        if (selectedServices.length > 0) {
          const serviceLabels = Array.from(selectedServices).map((service) => {
            return service.parentElement.textContent.trim();
          });
          servicesText = serviceLabels.slice(0, 3).join(", ");
          if (serviceLabels.length > 3) {
            servicesText += ` and ${serviceLabels.length - 3} more`;
          }
        }
        document.getElementById("summary-services").textContent = servicesText || "None selected";

        // Selected dates
        const multiDates = document.getElementById("multi-dates")?.value;
        document.getElementById("summary-dates").textContent = multiDates || "Not selected";

        // Schedule
        const startTime = document.getElementById("preferred-start-time")?.value;
        const endTime = document.getElementById("preferred-end-time")?.value;
        let scheduleText = "";
        if (startTime && endTime) {
          scheduleText = `${startTime} - ${endTime}`;
        }
        document.getElementById("summary-schedule").textContent = scheduleText || "Not specified";

        // Start date
        const startDate = document.getElementById("start-date")?.value;
        if (startDate) {
          const formattedDate = new Date(startDate).toLocaleDateString("en-MY", {
            weekday: "long",
            year: "numeric",
            month: "long",
            day: "numeric",
          });
          document.getElementById("summary-start-date").textContent = formattedDate;
        }

        // Transportation
        const transportation = document.querySelector('input[name="transportation_mode"]:checked');
        if (transportation) {
          const transportLabel = transportation.nextElementSibling.nextElementSibling.querySelector("strong").textContent;
          document.getElementById("summary-transportation").textContent = transportLabel;
        }

        // Contact information
        document.getElementById("summary-name").textContent = 
          document.getElementById("full-name")?.value || "Not provided";
        document.getElementById("summary-phone").textContent = 
          document.getElementById("phone")?.value || "Not provided";
        document.getElementById("summary-email").textContent = 
          document.getElementById("email")?.value || "Not provided";

        // Emergency contact
        document.getElementById("summary-emergency").textContent = 
          document.getElementById("emergency-contact")?.value || "Not provided";

        // Relationship
        const relationship = document.getElementById("relationship")?.value;
        document.getElementById("summary-relationship").textContent = 
          relationship ? relationship.charAt(0).toUpperCase() + relationship.slice(1).replace('-', ' ') : "Not specified";

        // Address
        const address = document.getElementById("home-address")?.value;
        const city = document.getElementById("city")?.value;
        const state = document.getElementById("state")?.value;
        if (address && city && state) {
          const fullAddress = `${address}, ${city}, ${state}`;
          document.getElementById("summary-address").textContent = 
            fullAddress.length > 80 ? fullAddress.substring(0, 80) + "..." : fullAddress;
        }

        // Care recipient
        const patientName = document.getElementById("patient-name")?.value;
        const patientAge = document.getElementById("patient-age")?.value;
        const patientGender = document.getElementById("patient-gender")?.value;

        let careRecipientText = "";
        if (patientName && patientAge) {
          careRecipientText = `${patientName} (Age: ${patientAge})`;
        } else if (patientAge) {
          if (relationship === "self") {
            careRecipientText = `Self (Age: ${patientAge})`;
          } else {
            careRecipientText = `Age: ${patientAge}`;
          }
        }
        document.getElementById("summary-care-recipient").textContent = careRecipientText || "Not specified";

        // Recipient details
        let recipientDetails = "";
        if (patientAge && patientGender) {
          recipientDetails = `Age: ${patientAge}, ${patientGender.charAt(0).toUpperCase() + patientGender.slice(1)}`;
        } else if (patientAge) {
          recipientDetails = `Age: ${patientAge}`;
        } else if (patientGender) {
          recipientDetails = patientGender.charAt(0).toUpperCase() + patientGender.slice(1);
        }
        document.getElementById("summary-recipient-details").textContent = recipientDetails || "Not specified";

        // Recipient language
        const patientLanguage = document.getElementById("patient-language")?.value;
        document.getElementById("summary-recipient-language").textContent = 
          patientLanguage ? patientLanguage.charAt(0).toUpperCase() + patientLanguage.slice(1) : "English";

        // Medical conditions
        const medicalConditions = document.getElementById("medical-conditions")?.value;
        document.getElementById("summary-medical").textContent = 
          medicalConditions ? (medicalConditions.length > 100 ? medicalConditions.substring(0, 100) + "..." : medicalConditions) : "None specified";

        // Mobility level
        const mobility = document.getElementById("mobility-level")?.value;
        document.getElementById("summary-mobility").textContent = 
          mobility ? mobility.charAt(0).toUpperCase() + mobility.slice(1).replace('-', ' ') : "Not specified";

        // Allergies
        const allergies = document.getElementById("allergies")?.value;
        document.getElementById("summary-allergies").textContent = 
          allergies ? (allergies.length > 80 ? allergies.substring(0, 80) + "..." : allergies) : "None specified";

        // Companion preferences
        const companionGender = document.getElementById("companion-gender")?.value;
        document.getElementById("summary-companion-gender").textContent = 
          companionGender ? companionGender.charAt(0).toUpperCase() + companionGender.slice(1).replace('-', ' ') : "No preference";

        const companionLanguage = document.getElementById("companion-language")?.value;
        document.getElementById("summary-companion-language").textContent = 
          companionLanguage ? companionLanguage.charAt(0).toUpperCase() + companionLanguage.slice(1) : "English";

        


        // Additional notes
        const notes = document.getElementById("additional-notes")?.value;
        document.getElementById("summary-notes").textContent = 
          notes ? (notes.length > 100 ? notes.substring(0, 100) + "..." : notes) : "None";
      }

      // Payment processing function
      function proceedToPayment() {
        // Validate terms agreement before proceeding
        const termsAgreed = document.querySelector('input[name="terms_agreed"]:checked');
        if (!termsAgreed) {
          alert("Please agree to the Terms & Conditions and Privacy Policy before proceeding to payment.");
          return;
        }

        // Show loading state
        const payButton = document.getElementById('pay-deposit-btn');
        const originalText = payButton.innerHTML;
        payButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        payButton.disabled = true;

        // Generate booking reference
        const refNumber = "TM" + Date.now().toString().slice(-6);
        
        // Store booking data (in real implementation, this would be sent to backend)
        const bookingData = {
          reference: refNumber,
          package: document.querySelector('input[name="package"]:checked')?.value,
          contactName: document.getElementById("full-name")?.value,
          phone: document.getElementById("phone")?.value,
          email: document.getElementById("email")?.value,
          timestamp: new Date().toISOString()
        };

        console.log("Home Care Package Booking Data:", bookingData);

        // Simulate form submission delay, then redirect
        setTimeout(() => {
          // Redirect to Billplz payment page
          window.location.href = "https://www.billplz.com/deposit4Teman";
        }, 1500);
      }

      // Flatpickr and date selection logic
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(today.getDate() + 1);
      const dayAfterTomorrow = new Date(today);
      dayAfterTomorrow.setDate(today.getDate() + 2);

      function formatDate(date) {
        return date.toISOString().split('T')[0];
      }

      const minDateStr = formatDate(dayAfterTomorrow);
      const messageEl = document.getElementById("date-limit-message");
      const countEl = document.getElementById("selected-count");

      // Initialize Flatpickr with 20-date limit enforcement
      const fp = flatpickr("#multi-dates", {
        mode: "multiple",
        dateFormat: "Y-m-d",
        disable: [formatDate(today), formatDate(tomorrow)],
        minDate: minDateStr,
        onChange: function(selectedDates, dateStr, instance) {
          updateDateSelection(selectedDates, instance);
        },
        onReady: function(selectedDates, dateStr, instance) {
          updateDateSelection(selectedDates, instance);
        },
        // Prevent selection of more than 20 dates
        onDayCreate: function(dObj, dStr, fp, dayElem) {
          dayElem.addEventListener('click', function(e) {
            if (fp.selectedDates.length >= 20 && !dayElem.classList.contains('selected')) {
              e.preventDefault();
              e.stopPropagation();
              return false;
            }
          });
        }
      });

      // Update date selection display and enforce 20-date limit
      function updateDateSelection(selectedDates, instance) {
        const count = selectedDates.length;
        if (countEl) countEl.textContent = count;
        
        // Show/hide message for less than 20 dates
        if (messageEl) {
          if (count < 20) {
            messageEl.style.display = "block";
          } else {
            messageEl.style.display = "none";
          }
        }
        
        // Visual feedback when at limit
        if (count >= 20) {
          const calendar = instance.calendarContainer;
          if (calendar) {
            const unselectedDays = calendar.querySelectorAll('.flatpickr-day:not(.selected):not(.flatpickr-disabled)');
            unselectedDays.forEach(day => {
              day.style.opacity = '0.3';
              day.style.pointerEvents = 'none';
            });
          }
        } else {
          const calendar = instance.calendarContainer;
          if (calendar) {
            const unselectedDays = calendar.querySelectorAll('.flatpickr-day:not(.selected):not(.flatpickr-disabled)');
            unselectedDays.forEach(day => {
              day.style.opacity = '';
              day.style.pointerEvents = '';
            });
          }
        }
      }

      // Close modal function
      function closeModal() {
        const modal = document.getElementById("booking-success-modal");
        if (modal) modal.style.display = "none";
      }

      // Handle form initialization
      document.addEventListener("DOMContentLoaded", function () {
        // Set minimum date to day after tomorrow
        const startDateEl = document.getElementById("start-date");
        const endDateEl = document.getElementById("end-date");
        if (startDateEl) startDateEl.setAttribute("min", minDateStr);
        if (endDateEl) endDateEl.setAttribute("min", minDateStr);

        // Initialize progress steps
        updateProgressSteps();

        // Add event listeners for validation
        const startTimeEl = document.getElementById("preferred-start-time");
        const endTimeEl = document.getElementById("preferred-end-time");
        const startDateFormEl = document.getElementById("start-date");
        const endDateFormEl = document.getElementById("end-date");

        if (startTimeEl) startTimeEl.addEventListener('change', validateTimes);
        if (endTimeEl) endTimeEl.addEventListener('change', validateTimes);
        if (startDateFormEl) startDateFormEl.addEventListener('change', validateDateRange);
        if (endDateFormEl) endDateFormEl.addEventListener('change', validateDateRange);

        // Load components
        loadComponents();
      });

      // Load header and footer components
      async function loadComponents() {
        try {
          const headerResponse = await fetch("../components/header.html");
          if (headerResponse.ok) {
            const headerHTML = await headerResponse.text();
            const headerPlaceholder = document.getElementById("header-placeholder");
            if (headerPlaceholder) headerPlaceholder.innerHTML = headerHTML;

            setTimeout(() => {
              const bookingLink = document.querySelector('a[href="booking.html"]');
              if (bookingLink) {
                bookingLink.classList.add("active");
              }
              initializeNavigation();
            }, 100);
          }

          const footerResponse = await fetch("../components/footer.html");
          if (footerResponse.ok) {
            const footerHTML = await footerResponse.text();
            const footerPlaceholder = document.getElementById("footer-placeholder");
            if (footerPlaceholder) footerPlaceholder.innerHTML = footerHTML;
          }

          initializeMainJS();
        } catch (error) {
          console.error("Error loading components:", error);
        }
      }

      // Initialize navigation functionality
      function initializeNavigation() {
        const navToggle = document.getElementById("nav-toggle");
        const navMenu = document.getElementById("nav-menu");

        if (navToggle && navMenu) {
          navToggle.addEventListener("click", () => {
            navMenu.classList.toggle("show");
            const icon = navToggle.querySelector("i");
            if (navMenu.classList.contains("show")) {
              icon.className = "fas fa-times";
            } else {
              icon.className = "fas fa-bars";
            }
          });

          document.querySelectorAll(".nav__link").forEach((link) => {
            link.addEventListener("click", () => {
              navMenu.classList.remove("show");
              const icon = navToggle.querySelector("i");
              if (icon) icon.className = "fas fa-bars";
            });
          });

          document.addEventListener("click", (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
              navMenu.classList.remove("show");
              const icon = navToggle.querySelector("i");
              if (icon) icon.className = "fas fa-bars";
            }
          });
        }

        window.addEventListener("scroll", () => {
          const header = document.getElementById("header");
          if (header) {
            if (window.scrollY > 100) {
              header.style.background = "rgba(255, 255, 255, 0.98)";
              header.style.boxShadow = "0 2px 20px rgba(0, 0, 0, 0.1)";
            } else {
              header.style.background = "rgba(255, 255, 255, 0.95)";
              header.style.boxShadow = "none";
            }
          }
        });
      }

      function initializeMainJS() {
        console.log("Teman Malaysia home care package booking loaded successfully!");
      }
    </script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>