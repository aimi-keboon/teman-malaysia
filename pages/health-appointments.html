<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Book Health Appointment Support - Teman Malaysia</title>
    <meta
      name="description"
      content="Book professional assistance for medical checkups and treatments with Teman Malaysia. Caring companionship for your health appointments."
    />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="../assets/images/favicon.png">
    <link rel="apple-touch-icon" href="../assets/images/apple-touch-icon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="../assets/css/main.css">
    <link rel="stylesheet" href="../assets/css/responsive.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
      /* Reset and base styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.6;
        color: #374151;
        background: #f9fafb;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* Header Styles */
      .header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
        transition: all 0.3s ease;
      }

      .nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 0;
      }

      .nav__logo {
        height: 40px;
        width: auto;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 500;
        text-decoration: none;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 14px;
      }

      .btn--primary {
        background: #3b82f6;
        color: white;
      }

      .btn--primary:hover {
        background: #2563eb;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      .btn--outline {
        background: transparent;
        color: #3b82f6;
        border: 2px solid #3b82f6;
      }

      .btn--outline:hover {
        background: #3b82f6;
        color: white;
        transform: translateY(-2px);
      }

      .btn--large {
        padding: 16px 32px;
        font-size: 16px;
      }

      .btn--secondary {
        background: #10b981;
        color: white;
      }

      .btn--secondary:hover {
        background: #059669;
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
      }

      /* Main Section */
      .booking-section {
        padding: 120px 0 80px 0;
        min-height: 100vh;
      }

      .booking__header {
        text-align: center;
        margin-bottom: 60px;
      }

      .booking__title {
        font-size: 3rem;
        font-weight: 700;
        color: #1f2937;
        margin-bottom: 16px;
      }

      .booking__subtitle {
        font-size: 1.25rem;
        color: #6b7280;
        max-width: 600px;
        margin: 0 auto;
      }

      .service-info-card {
        background: white;
        border-radius: 16px;
        padding: 32px;
        margin-bottom: 40px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 2px solid #e5f3ff;
      }

      .service-header {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
      }

      .service-icon {
        width: 60px;
        height: 60px;
        background: #3b82f6;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .service-icon i {
        font-size: 24px;
        color: white;
      }

      .service-header h2 {
        font-size: 1.75rem;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
      }

      .service-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-top: 24px;
      }

      .feature-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
        color: #4b5563;
      }

      .feature-item i {
        color: #10b981;
        font-size: 12px;
      }

      /* Progress Steps */
      .progress-steps {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 40px 0 60px 0;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        gap: 80px;
      }

      .step {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .step__number {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 18px;
        background: #e5e7eb;
        color: #6b7280;
        border: 3px solid #e5e7eb;
        transition: all 0.3s ease;
        margin-bottom: 12px;
      }

      .step.active .step__number {
        background: #3b82f6;
        color: white;
        border-color: #3b82f6;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
      }

      .step.completed .step__number {
        background: #10b981;
        color: white;
        border-color: #10b981;
      }

      .step__label {
        font-size: 14px;
        font-weight: 500;
        color: #6b7280;
        text-align: center;
        transition: color 0.3s ease;
        white-space: nowrap;
      }

      .step.active .step__label {
        color: #3b82f6;
        font-weight: 600;
      }

      .step.completed .step__label {
        color: #10b981;
        font-weight: 600;
      }

      /* Form Container */
      .booking__container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        border-radius: 16px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        overflow: hidden;
      }

      /* Form Styles */
      .booking-form {
        padding: 40px;
      }

      .form-step {
        display: none;
      }

      .form-step.active {
        display: block;
      }

      .step-title {
        font-size: 2rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 32px;
        text-align: center;
      }

      /* Package Selection */
      .package-options {
        display: grid;
        gap: 20px;
        margin-bottom: 40px;
      }

      .package-option {
        position: relative;
      }

      .package-option input[type="radio"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }

      .package-card {
        display: block;
        padding: 24px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: white;
      }

      .package-card:hover {
        border-color: #3b82f6;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      }

      .package-option input[type="radio"]:checked + .package-card {
        border-color: #3b82f6;
        background: #f0f9ff;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
      }

      .package-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 16px;
      }

      .package-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
      }

      .package-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: #3b82f6;
      }

      .package-description {
        color: #6b7280;
        margin-bottom: 16px;
      }

      .hours-selection {
        margin-top: 16px;
        padding-top: 16px;
        border-top: 1px solid #e5e7eb;
      }

      .package-notes {
        margin-top: 16px;
        padding: 12px;
        background: #f9fafb;
        border-radius: 6px;
      }

      .package-notes small {
        display: block;
        color: #6b7280;
        margin-bottom: 4px;
      }

      /* Form Sections */
      .form-section {
        margin-bottom: 40px;
        padding: 24px;
        background: #f9fafb;
        border-radius: 12px;
      }

      .form-section-title {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 24px;
      }

      .form-section-title i {
        color: #3b82f6;
      }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-label {
        font-weight: 500;
        color: #374151;
        margin-bottom: 8px;
        font-size: 14px;
      }

      .form-input,
      .form-select,
      .form-textarea {
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 14px;
        transition: border-color 0.3s ease;
      }

      .form-input:focus,
      .form-select:focus,
      .form-textarea:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .form-help {
        font-size: 12px;
        color: #6b7280;
        margin-top: 4px;
      }

      /* Radio and Checkbox Options */
      .radio-option,
      .checkbox-item {
        display: flex;
        align-items: flex-start;
        gap: 12px;
        padding: 16px;
        border: 1px solid #d1d5db;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 12px;
      }

      .radio-option:hover,
      .checkbox-item:hover {
        border-color: #3b82f6;
      }

      .radio-option input[type="radio"],
      .checkbox-item input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        pointer-events: none;
      }

      .radio-custom,
      .checkmark {
        width: 20px;
        height: 20px;
        border: 2px solid #d1d5db;
        position: relative;
        flex-shrink: 0;
        transition: all 0.3s ease;
      }

      .radio-custom {
        border-radius: 50%;
      }

      .checkmark {
        border-radius: 4px;
      }

      .radio-option:hover .radio-custom,
      .checkbox-item:hover .checkmark {
        border-color: #3b82f6;
      }

      .radio-option input[type="radio"]:checked ~ .radio-custom {
        border-color: #3b82f6;
      }

      .radio-option input[type="radio"]:checked ~ .radio-custom::after {
        content: "";
        width: 8px;
        height: 8px;
        background: #3b82f6;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .checkbox-item input[type="checkbox"]:checked ~ .checkmark {
        background: #3b82f6;
        border-color: #3b82f6;
      }

      .checkbox-item input[type="checkbox"]:checked ~ .checkmark::after {
        content: "✓";
        color: white;
        font-size: 12px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .radio-content strong {
        display: block;
        margin-bottom: 4px;
        color: #1f2937;
      }

      .radio-content p {
        font-size: 14px;
        color: #6b7280;
        margin: 0;
      }

      /* Checkbox Group */
      .checkbox-group {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
      }

      /* Form Actions */
      .form-actions {
        display: flex;
        justify-content: space-between;
        gap: 16px;
        margin-top: 40px;
      }

      /* Back Link */
      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: #6b7280;
        text-decoration: none;
        margin-bottom: 24px;
        font-size: 14px;
        transition: color 0.3s ease;
      }

      .back-link:hover {
        color: #3b82f6;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .booking__title {
          font-size: 2rem;
        }

        .booking-form {
          padding: 24px;
        }

        .form-grid {
          grid-template-columns: 1fr;
        }

        .form-actions {
          flex-direction: column;
        }

        .service-header {
          flex-direction: column;
          text-align: center;
          align-items: center;
        }

        .service-icon {
          margin-bottom: 16px;
        }

        .progress-steps {
          margin: 30px 0 40px 0;
          gap: 40px;
        }

        .step__number {
          width: 40px;
          height: 40px;
          font-size: 16px;
        }

        .step__label {
          font-size: 12px;
        }

        .package-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }
      }

      .text-center {
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- Header Component -->
    <div id="header-placeholder"></div>

    <!-- Booking Section -->
    <section class="booking-section">
      <div class="container">
        <a href="booking.html" class="back-link">
          <i class="fas fa-arrow-left"></i>
          Back to Services
        </a>

        <div class="booking__header text-center">
          <h1 class="booking__title">Health Appointment Support</h1>
          <p class="booking__subtitle">
            Professional assistance for medical checkups and treatments with caring companionship
          </p>
        </div>

        <!-- Service Information Card -->
        <div class="service-info-card">
          <div class="service-header">
            <div class="service-icon">
              <i class="fas fa-stethoscope"></i>
            </div>
            <h2>TEMAN to Health Appointments</h2>
          </div>
          <p>Get the support you need for medical visits with our trained companions who provide assistance, emotional support, and practical help throughout your appointment.</p>
          
          <div class="service-features">
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Accompaniment to medical appointments
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Assistance with mobility and transportation
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Help with paperwork and communication
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Emotional support during visits
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Medication reminders
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              Post-appointment care assistance
            </div>
          </div>
        </div>

        <div class="booking__container">
          <!-- Progress Steps -->
          <div class="progress-steps" id="progressSteps">
            <div class="step active" data-step="1">
              <div class="step__number">1</div>
              <div class="step__label">Package</div>
            </div>
            <div class="step" data-step="2">
              <div class="step__number">2</div>
              <div class="step__label">Details</div>
            </div>
            <div class="step" data-step="3">
              <div class="step__number">3</div>
              <div class="step__label">Confirm</div>
            </div>
          </div>

          <!-- Booking Form -->
          <form id="health-booking-form" class="booking-form" data-form-type="health-appointments">
            <!-- Step 1: Package Selection -->
            <div class="form-step active" data-step="1">
              <h2 class="step-title">Choose Your Package</h2>

              <div class="package-options">
                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="hourly"
                    id="hourly-package"
                    required
                  />
                  <label for="hourly-package" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Hourly Rate</div>
                      <div class="package-price">RM35/hour</div>
                    </div>
                    <div class="package-description">
                      Flexible hourly booking for shorter appointments or specific needs. Minimum 2 hours required.
                    </div>
                    
                    <div class="hours-selection" style="display: none">
                      <label for="hours" class="form-label">Number of Hours: *</label>
                      <select name="hours" id="hours" class="form-select">
                        <option value="">Select hours</option>
                        <option value="2">2 hours - RM70</option>
                        <option value="3">3 hours - RM105</option>
                        <option value="4">4 hours - RM140</option>
                        <option value="5">5 hours - RM175</option>
                        <option value="6">6 hours - RM210</option>
                        <option value="custom">More than 6 hours (Contact us)</option>
                      </select>
                    </div>
                    
                    <div class="package-notes">
                      <small>• Perfect for routine checkups and short appointments</small>
                      <small>• Flexible scheduling</small>
                    </div>
                  </label>
                </div>

                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="package1"
                    id="package1"
                  />
                  <label for="package1" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Package 1</div>
                      <div class="package-price">RM132</div>
                    </div>
                    <div class="package-description">
                      4-hour package ideal for comprehensive medical visits, consultations, and procedures.
                    </div>
                    
                    <div class="package-notes">
                      <small>• 4 hours of professional support</small>
                      <small>• Additional hours at RM33/hour</small>
                      <small>• Great for specialist appointments</small>
                    </div>
                  </label>
                </div>

                <div class="package-option">
                  <input
                    type="radio"
                    name="package"
                    value="package2"
                    id="package2"
                  />
                  <label for="package2" class="package-card">
                    <div class="package-header">
                      <div class="package-title">Package 2</div>
                      <div class="package-price">RM186</div>
                    </div>
                    <div class="package-description">
                      6-hour package perfect for extended medical procedures, hospital visits, or multiple appointments.
                    </div>
                    
                    <div class="package-notes">
                      <small>• 6 hours of comprehensive support</small>
                      <small>• Additional hours at RM31/hour</small>
                      <small>• Best value for longer appointments</small>
                    </div>
                  </label>
                </div>
              </div>

              <div style="background: #f0f9ff; padding: 16px; border-radius: 8px; margin-bottom: 32px;">
                <h4 style="color: #1e40af; margin-bottom: 8px;">Additional Fees:</h4>
                <small style="display: block; color: #1e40af; margin-bottom: 4px;">• Transportation: RM0.80/KM or e-hailing fare</small>
                <small style="display: block; color: #1e40af; margin-bottom: 4px;">• Transport allowance: RM20/session</small>
                <small style="display: block; color: #1e40af;">• Surcharge: RM37/hour for Public Holiday/Sunday/last minute booking</small>
              </div>

              <div class="form-actions">
                <button
                  type="button"
                  class="btn btn--primary btn--large"
                  onclick="nextStep()"
                >
                  Continue to Details
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>
            <!-- Step 2: Personal Details -->
            <div class="form-step" data-step="2">
              <h2 class="step-title">Booking Details</h2>

              <!-- Contact Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-user"></i>
                  Contact Information
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="full-name" class="form-label">Full Name *</label>
                    <input
                      type="text"
                      id="full-name"
                      name="full_name"
                      class="form-input"
                      placeholder="Enter your full name"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="relationship" class="form-label">Relationship to Patient</label>
                    <select id="relationship" name="relationship" class="form-select">
                      <option value="">Select relationship</option>
                      <option value="self">Self</option>
                      <option value="spouse">Spouse</option>
                      <option value="child">Son/Daughter</option>
                      <option value="parent">Parent</option>
                      <option value="sibling">Brother/Sister</option>
                      <option value="relative">Other Relative</option>
                      <option value="caregiver">Professional Caregiver</option>
                      <option value="friend">Friend</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="phone" class="form-label">Phone Number *</label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      class="form-input"
                      placeholder="+60 11-234 5678"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="email" class="form-label">Email Address *</label>
                    <input
                      type="email"
                      id="email"
                      name="email"
                      class="form-input"
                      placeholder="your.email@example.com"
                      required
                    />
                  </div>
                </div>

                <div class="form-group">
                  <label for="emergency-contact" class="form-label">Emergency Contact Person</label>
                  <input
                    type="text"
                    id="emergency-contact"
                    name="emergency_contact"
                    class="form-input"
                    placeholder="Name and phone number of emergency contact"
                  />
                </div>
              </div>

              <!-- Patient Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-heart-pulse"></i>
                  Patient Information
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="patient-name" class="form-label">Patient Name</label>
                    <input
                      type="text"
                      id="patient-name"
                      name="patient_name"
                      class="form-input"
                      placeholder="If different from contact person"
                    />
                  </div>

                  <div class="form-group">
                    <label for="patient-age" class="form-label">Patient Age</label>
                    <input
                      type="number"
                      id="patient-age"
                      name="patient_age"
                      class="form-input"
                      min="1"
                      max="120"
                      placeholder="Age in years"
                    />
                  </div>

                  <div class="form-group">
                    <label for="patient-gender" class="form-label">Gender</label>
                    <select id="patient-gender" name="patient_gender" class="form-select">
                      <option value="">Prefer not to say</option>
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="patient-language" class="form-label">Preferred Language</label>
                    <select id="patient-language" name="patient_language" class="form-select">
                      <option value="english">English</option>
                      <option value="bahasa">Bahasa Malaysia</option>
                      <option value="mandarin">Mandarin</option>
                      <option value="cantonese">Cantonese</option>
                      <option value="hokkien">Hokkien</option>
                      <option value="tamil">Tamil</option>
                      <option value="other">Other</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Appointment Details -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-calendar-alt"></i>
                  Appointment Details
                </h3>
                <div class="form-grid">
                  <div class="form-group">
                    <label for="appointment-type" class="form-label">Type of Medical Appointment *</label>
                    <select id="appointment-type" name="appointment_type" class="form-select" required>
                      <option value="">Select appointment type</option>
                      <option value="general-checkup">General Health Checkup</option>
                      <option value="specialist">Specialist Consultation</option>
                      <option value="diagnostic">Diagnostic Tests/Screening</option>
                      <option value="treatment">Medical Treatment</option>
                      <option value="therapy">Physical/Occupational Therapy</option>
                      <option value="dental">Dental Appointment</option>
                      <option value="eye-care">Eye Care/Optometry</option>
                      <option value="mental-health">Mental Health/Counseling</option>
                      <option value="vaccination">Vaccination</option>
                      <option value="other">Other</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label for="medical-facility" class="form-label">Medical Facility/Hospital *</label>
                    <input
                      type="text"
                      id="medical-facility"
                      name="medical_facility"
                      class="form-input"
                      placeholder="Name of hospital, clinic, or medical center"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="doctor-name" class="form-label">Doctor/Specialist Name</label>
                    <input
                      type="text"
                      id="doctor-name"
                      name="doctor_name"
                      class="form-input"
                      placeholder="Dr. Name (if known)"
                    />
                  </div>

                  <div class="form-group">
                    <label for="appointment-date" class="form-label">Appointment Date *</label>
                    <input
                      type="date"
                      id="appointment-date"
                      name="appointment_date"
                      class="form-input"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="appointment-time" class="form-label">Appointment Time *</label>
                    <input
                      type="time"
                      id="appointment-time"
                      name="appointment_time"
                      class="form-input"
                      required
                    />
                  </div>

                  <div class="form-group">
                    <label for="estimated-duration" class="form-label">Estimated Duration</label>
                    <select id="estimated-duration" name="estimated_duration" class="form-select">
                      <option value="">Select duration</option>
                      <option value="30min">30 minutes</option>
                      <option value="1hour">1 hour</option>
                      <option value="1.5hours">1.5 hours</option>
                      <option value="2hours">2 hours</option>
                      <option value="3hours">3 hours</option>
                      <option value="4hours">4+ hours</option>
                      <option value="unknown">Unknown</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Location Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-map-marker-alt"></i>
                  Location Details
                </h3>
                <div class="form-group">
                  <label for="facility-address" class="form-label">Medical Facility Address *</label>
                  <textarea
                    id="facility-address"
                    name="facility_address"
                    class="form-textarea"
                    rows="3"
                    placeholder="Complete address of the medical facility"
                    required
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="pickup-address" class="form-label">Pickup Address *</label>
                  <textarea
                    id="pickup-address"
                    name="pickup_address"
                    class="form-textarea"
                    rows="3"
                    placeholder="Address where our Temanion should meet you"
                    required
                  ></textarea>
                </div>

                <div class="form-grid">
                  <div class="form-group">
                    <label for="pickup-time" class="form-label">Preferred Pickup Time *</label>
                    <input
                      type="time"
                      id="pickup-time"
                      name="pickup_time"
                      class="form-input"
                      required
                    />
                    <small class="form-help">We recommend 30-60 minutes before appointment time</small>
                  </div>

                  <div class="form-group">
                    <label for="return-address" class="form-label">Return Address</label>
                    <input
                      type="text"
                      id="return-address"
                      name="return_address"
                      class="form-input"
                      placeholder="If different from pickup address"
                    />
                  </div>
                </div>
              </div>

              <!-- Transportation -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-car"></i>
                  Transportation
                </h3>
                <div style="display: grid; gap: 12px;">
                  <label class="radio-option">
                    <input type="radio" name="transportation_mode" value="client-provided" required />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>I will provide transportation</strong>
                      <p>You will drive or arrange transportation for the Temanion</p>
                    </div>
                  </label>

                  <label class="radio-option">
                    <input type="radio" name="transportation_mode" value="teman-provided" required />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>Temanion will arrange transportation</strong>
                      <p>Our Temanion will handle their own transportation</p>
                    </div>
                  </label>

                  <label class="radio-option">
                    <input type="radio" name="transportation_mode" value="e-hailing" required />
                    <span class="radio-custom"></span>
                    <div class="radio-content">
                      <strong>E-Hailing Service (Grab/Taxi)</strong>
                      <p>Use ride-hailing services together (additional costs apply)</p>
                    </div>
                  </label>
                </div>
              </div>

              <!-- Medical Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-notes-medical"></i>
                  Medical & Care Information
                </h3>

                <div class="form-group">
                  <label for="medical-conditions" class="form-label">Medical Conditions</label>
                  <textarea
                    id="medical-conditions"
                    name="medical_conditions"
                    class="form-textarea"
                    rows="3"
                    placeholder="Please list any medical conditions, disabilities, or health concerns that our companion should be aware of..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="medications" class="form-label">Current Medications</label>
                  <textarea
                    id="medications"
                    name="medications"
                    class="form-textarea"
                    rows="2"
                    placeholder="List current medications and any reminders needed..."
                  ></textarea>
                </div>

                <div class="form-group">
                  <label for="mobility-assistance" class="form-label">Mobility Assistance Needed</label>
                  <div class="checkbox-group">
                    <label class="checkbox-item">
                      <input type="checkbox" name="mobility_needs[]" value="wheelchair" />
                      <span class="checkmark"></span>
                      Wheelchair assistance
                    </label>
                    <label class="checkbox-item">
                      <input type="checkbox" name="mobility_needs[]" value="walker" />
                      <span class="checkmark"></span>
                      Walker/walking aid
                    </label>
                    <label class="checkbox-item">
                      <input type="checkbox" name="mobility_needs[]" value="assistance" />
                      <span class="checkmark"></span>
                      Walking assistance
                    </label>
                    <label class="checkbox-item">
                      <input type="checkbox" name="mobility_needs[]" value="lifting" />
                      <span class="checkmark"></span>
                      Lifting assistance
                    </label>
                  </div>
                </div>

                <div class="form-group">
                  <label for="special-requirements" class="form-label">Special Requirements</label>
                  <textarea
                    id="special-requirements"
                    name="special_requirements"
                    class="form-textarea"
                    rows="3"
                    placeholder="Any specific assistance needed, allergies, dietary restrictions, or other important information..."
                  ></textarea>
                </div>
              </div>

              <!-- Additional Information -->
              <div class="form-section">
                <h3 class="form-section-title">
                  <i class="fas fa-comment-dots"></i>
                  Additional Information
                </h3>

                <div class="form-group">
                  <label for="companion-preferences" class="form-label">Companion Preferences</label>
                  <div class="form-grid">
                    <div class="form-group">
                      <label for="companion-gender" class="form-label">Preferred Gender</label>
                      <select id="companion-gender" name="companion_gender" class="form-select">
                        <option value="no-preference">No preference</option>
                        <option value="female">Female</option>
                        <option value="male">Male</option>
                      </select>
                    </div>

                    <div class="form-group">
                      <label for="companion-language" class="form-label">Language Preference</label>
                      <select id="companion-language" name="companion_language" class="form-select">
                        <option value="english">English</option>
                        <option value="bahasa">Bahasa Malaysia</option>
                        <option value="mandarin">Mandarin</option>
                        <option value="cantonese">Cantonese</option>
                        <option value="multilingual">Multilingual preferred</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label for="additional-notes" class="form-label">Additional Notes</label>
                  <textarea
                    id="additional-notes"
                    name="additional_notes"
                    class="form-textarea"
                    rows="4"
                    placeholder="Any other information, special requests, or concerns you'd like us to know about..."
                  ></textarea>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn--outline btn--large" onclick="prevStep()">
                  <i class="fas fa-arrow-left"></i>
                  Previous
                </button>
                <button type="button" class="btn btn--primary btn--large" onclick="nextStep()">
                  Review Booking
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>

            <!-- Step 3: Confirmation -->
            <div class="form-step" data-step="3">
              <h2 class="step-title">Booking Summary</h2>

              <div class="booking-summary">
                <div class="summary-card">
                  <h3><i class="fas fa-clipboard-list"></i> Service Details</h3>
                  <div class="summary-item">
                    <span class="summary-label">Service:</span>
                    <span class="summary-value">Health Appointment Support</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Package:</span>
                    <span class="summary-value" id="summary-package">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Appointment:</span>
                    <span class="summary-value" id="summary-appointment">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Medical Facility:</span>
                    <span class="summary-value" id="summary-facility">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Transportation:</span>
                    <span class="summary-value" id="summary-transportation">-</span>
                  </div>
                  <div class="summary-divider"></div>
                  <div class="summary-item total">
                    <span class="summary-label">Estimated Cost:</span>
                    <span class="summary-value" id="summary-total">RM 0</span>
                  </div>
                  <p class="cost-note">
                    *Final cost may vary based on additional services and transportation fees
                  </p>
                </div>

                <div class="summary-card">
                  <h3><i class="fas fa-user"></i> Contact Information</h3>
                  <div class="summary-item">
                    <span class="summary-label">Name:</span>
                    <span class="summary-value" id="summary-name">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Phone:</span>
                    <span class="summary-value" id="summary-phone">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Email:</span>
                    <span class="summary-value" id="summary-email">-</span>
                  </div>
                  <div class="summary-item">
                    <span class="summary-label">Pickup Address:</span>
                    <span class="summary-value" id="summary-pickup">-</span>
                  </div>
                </div>
              </div>

              <div style="background: #f0f9ff; border: 1px solid #bfdbfe; border-radius: 12px; padding: 24px; margin-bottom: 32px;">
                <h3 style="display: flex; align-items: center; gap: 8px; color: #1e40af; margin-bottom: 16px;">
                  <i class="fas fa-info-circle"></i> What Happens Next?
                </h3>
                <ul style="list-style: none; padding: 0;">
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #1e40af;">
                    <i class="fas fa-phone" style="width: 20px; text-align: center;"></i>
                    Our team will call you within 24 hours to confirm details
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #1e40af;">
                    <i class="fas fa-user-check" style="width: 20px; text-align: center;"></i>
                    We'll assign a suitable Temanion based on your requirements
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px; color: #1e40af;">
                    <i class="fas fa-calendar-check" style="width: 20px; text-align: center;"></i>
                    You'll receive confirmation with your Temanion's details
                  </li>
                  <li style="display: flex; align-items: center; gap: 12px; color: #1e40af;">
                    <i class="fas fa-heart" style="width: 20px; text-align: center;"></i>
                    Your companion will arrive at the scheduled time
                  </li>
                </ul>
              </div>

              <div style="margin-bottom: 32px;">
                <label style="display: flex; align-items: flex-start; gap: 12px; cursor: pointer;">
                  <input type="checkbox" name="terms_agreed" required style="position: absolute; opacity: 0; pointer-events: none;" />
                  <span class="checkmark"></span>
                  <span style="font-size: 14px; color: #374151;">
                    I agree to the <a href="#" style="color: #3b82f6; text-decoration: none;">Terms & Conditions</a> and 
                    <a href="#" style="color: #3b82f6; text-decoration: none;">Privacy Policy</a>
                  </span>
                </label>
              </div>

              <div class="form-actions">
                <button type="button" class="btn btn--outline btn--large" onclick="prevStep()">
                  <i class="fas fa-arrow-left"></i>
                  Previous
                </button>
                <button type="submit" class="btn btn--primary btn--large" id="submit-booking-btn">
                  <i class="fas fa-paper-plane"></i>
                  Submit Booking Request
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- Success Modal -->
    <div id="booking-success-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="success-icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h2>Booking Request Submitted!</h2>
        <p>
          Thank you for choosing Teman Malaysia for your health appointment support. 
          We've received your booking request and will contact you within 24 hours to confirm the details.
        </p>
        <div class="booking-reference">
          <strong>Reference Number: <span id="booking-ref-number"></span></strong>
        </div>
        <div class="modal-actions">
          <button class="btn btn--primary" onclick="window.location.href='booking.html'">
            Book Another Service
          </button>
          <button class="btn btn--outline" onclick="closeModal()">Close</button>
        </div>
      </div>
    </div>

    <!-- Footer Component -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script>
      // Current step tracking
      let currentStep = 1;
      const totalSteps = 3;

      // Update progress steps visual state
      function updateProgressSteps() {
        const steps = document.querySelectorAll(".step");

        steps.forEach((step, index) => {
          const stepNumber = index + 1;
          step.classList.remove("active", "completed");

          if (stepNumber < currentStep) {
            step.classList.add("completed");
          } else if (stepNumber === currentStep) {
            step.classList.add("active");
          }
        });
      }

      // Navigate to next step
      function nextStep() {
        if (currentStep < totalSteps) {
          if (validateCurrentStep()) {
            document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove("active");
            currentStep++;
            document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add("active");
            updateProgressSteps();

            if (currentStep === 3) {
              updateBookingSummary();
            }

            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        }
      }

      // Navigate to previous step
      function prevStep() {
        if (currentStep > 1) {
          document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.remove("active");
          currentStep--;
          document.querySelector(`.form-step[data-step="${currentStep}"]`).classList.add("active");
          updateProgressSteps();
          window.scrollTo({ top: 0, behavior: "smooth" });
        }
      }

      // Validate current step
      function validateCurrentStep() {
        if (currentStep === 1) {
          const packageSelected = document.querySelector('input[name="package"]:checked');
          if (!packageSelected) {
            alert("Please select a package before continuing.");
            return false;
          }

          if (packageSelected.value === "hourly" && !document.getElementById("hours").value) {
            alert("Please select the number of hours.");
            return false;
          }
        } else if (currentStep === 2) {
          const requiredFields = [
            "full_name", "phone", "email", "appointment_type", "medical_facility", 
            "appointment_date", "appointment_time", "facility_address", "pickup_address", "pickup_time"
          ];

          for (let field of requiredFields) {
            const element = document.querySelector(`[name="${field}"]`);
            if (!element.value.trim()) {
              alert(`Please fill in the ${field.replace("_", " ")} field.`);
              element.focus();
              return false;
            }
          }

          const transportationSelected = document.querySelector('input[name="transportation_mode"]:checked');
          if (!transportationSelected) {
            alert("Please select a transportation mode.");
            return false;
          }
        }
        return true;
      }

      // Update booking summary
      function updateBookingSummary() {
        // Package details
        const selectedPackage = document.querySelector('input[name="package"]:checked');
        if (selectedPackage) {
          let packageInfo = "";
          let estimatedCost = 0;

          if (selectedPackage.value === "hourly") {
            const hours = document.getElementById("hours").value;
            packageInfo = `Hourly Rate - ${hours} hours`;
            estimatedCost = hours * 35;
          } else if (selectedPackage.value === "package1") {
            packageInfo = "Package 1 (4 hours)";
            estimatedCost = 132;
          } else if (selectedPackage.value === "package2") {
            packageInfo = "Package 2 (6 hours)";
            estimatedCost = 186;
          }

          document.getElementById("summary-package").textContent = packageInfo;
          document.getElementById("summary-total").textContent = `RM ${estimatedCost}`;
        }

        // Appointment details
        const appointmentDate = document.getElementById("appointment-date").value;
        const appointmentTime = document.getElementById("appointment-time").value;
        const appointmentType = document.getElementById("appointment-type").value;
        
        if (appointmentDate && appointmentTime) {
          const formattedDate = new Date(appointmentDate).toLocaleDateString("en-MY", {
            weekday: "long", year: "numeric", month: "long", day: "numeric"
          });
          document.getElementById("summary-appointment").textContent = 
            `${appointmentType} on ${formattedDate} at ${appointmentTime}`;
        }

        // Medical facility
        document.getElementById("summary-facility").textContent = 
          document.getElementById("medical-facility").value || "-";

        // Transportation
        const transportation = document.querySelector('input[name="transportation_mode"]:checked');
        if (transportation) {
          const transportLabel = transportation.nextElementSibling.nextElementSibling.querySelector("strong").textContent;
          document.getElementById("summary-transportation").textContent = transportLabel;
        }

        // Contact information
        document.getElementById("summary-name").textContent = 
          document.getElementById("full-name").value || "-";
        document.getElementById("summary-phone").textContent = 
          document.getElementById("phone").value || "-";
        document.getElementById("summary-email").textContent = 
          document.getElementById("email").value || "-";
        document.getElementById("summary-pickup").textContent = 
          document.getElementById("pickup-address").value || "-";
      }

      // Handle package selection
      document.addEventListener("DOMContentLoaded", function () {
        // Show/hide hours selection for hourly package
        document.addEventListener("change", function (e) {
          if (e.target.name === "package") {
            const hoursSelection = document.querySelector(".hours-selection");
            if (e.target.value === "hourly") {
              hoursSelection.style.display = "block";
            } else {
              hoursSelection.style.display = "none";
            }
          }
        });

        // Set minimum date to today
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("appointment-date").setAttribute("min", today);

        // Initialize progress steps
        updateProgressSteps();
      });

      // Handle form submission
      document.getElementById("health-booking-form").addEventListener("submit", function (e) {
        e.preventDefault();

        const termsAgreed = document.querySelector('input[name="terms_agreed"]:checked');
        if (!termsAgreed) {
          alert("Please agree to the Terms & Conditions and Privacy Policy to continue.");
          return;
        }

        const refNumber = "TM" + Date.now().toString().slice(-6);
        document.getElementById("booking-ref-number").textContent = refNumber;
        document.getElementById("booking-success-modal").style.display = "flex";

        console.log("Health appointment booking submitted successfully");
      });

      // Close modal function
      function closeModal() {
        document.getElementById("booking-success-modal").style.display = "none";
      }

      // Load header and footer components
      async function loadComponents() {
        try {
          const headerResponse = await fetch("../components/header.html");
          if (headerResponse.ok) {
            const headerHTML = await headerResponse.text();
            document.getElementById("header-placeholder").innerHTML = headerHTML;

            setTimeout(() => {
              const bookingLink = document.querySelector('a[href="booking.html"]');
              if (bookingLink) {
                bookingLink.classList.add("active");
              }
              initializeNavigation();
            }, 100);
          }

          const footerResponse = await fetch("../components/footer.html");
          if (footerResponse.ok) {
            const footerHTML = await footerResponse.text();
            document.getElementById("footer-placeholder").innerHTML = footerHTML;
          }

          initializeMainJS();
        } catch (error) {
          console.error("Error loading components:", error);
        }
      }

      // Initialize navigation functionality
      function initializeNavigation() {
        const navToggle = document.getElementById("nav-toggle");
        const navMenu = document.getElementById("nav-menu");

        if (navToggle && navMenu) {
          navToggle.addEventListener("click", () => {
            navMenu.classList.toggle("show");
            const icon = navToggle.querySelector("i");
            if (navMenu.classList.contains("show")) {
              icon.className = "fas fa-times";
            } else {
              icon.className = "fas fa-bars";
            }
          });

          document.querySelectorAll(".nav__link").forEach((link) => {
            link.addEventListener("click", () => {
              navMenu.classList.remove("show");
              const icon = navToggle.querySelector("i");
              if (icon) icon.className = "fas fa-bars";
            });
          });

          document.addEventListener("click", (e) => {
            if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
              navMenu.classList.remove("show");
              const icon = navToggle.querySelector("i");
              if (icon) icon.className = "fas fa-bars";
            }
          });
        }

        window.addEventListener("scroll", () => {
          const header = document.getElementById("header");
          if (header) {
            if (window.scrollY > 100) {
              header.style.background = "rgba(255, 255, 255, 0.98)";
              header.style.boxShadow = "0 2px 20px rgba(0, 0, 0, 0.1)";
            } else {
              header.style.background = "rgba(255, 255, 255, 0.95)";
              header.style.boxShadow = "none";
            }
          }
        });
      }

      function initializeMainJS() {
        console.log("Teman Malaysia health appointments booking loaded successfully!");
      }

      document.addEventListener("DOMContentLoaded", function () {
        loadComponents();
      });
    </script>
    <script src="../assets/js/main.js"></script>
  </body>
</html>